{% extends 'base.html' %}

{% load i18n %}

{% block content %}

<h1>{% translate "Corpus - Busca" %}</h1>

<form action="{% url 'corpus:search' %}" method="post">
  {% csrf_token %}
  <div class="form-row">
    <div class="col-md-4 mx-auto">
      <div class="form-group">
        <input
          class="form-control"
          type="text"
          name="q"
          placeholder="{% translate 'Pesquisar...' %}"
          {% if q %}value="{{ q }}"{% endif %} >
      </div>
      <div class="form-group">
        <div class="form-check form-check-inline">
          <input
            class="form-check-input"
            name="search-pt"
            type="checkbox"
            id="pt-br-check"
            {% if search_pt %}checked{% endif %}>
          <label class="form-check-label" for="pt-br-check">{% translate "Português" %}</label>
        </div>
        <div class="form-check form-check-inline">
          <input
            class="form-check-input"
            name="search-en"
            type="checkbox"
            id="pt-br-check"
            {% if search_en %}checked{% endif %}>
          <label class="form-check-label" for="pt-br-check">{% translate "Inglês" %}</label>
        </div>
        <div class="form-check form-check-inline">
          <input
            class="form-check-input"
            name="phrase"
            type="checkbox"
            id="phrase-check"
            {% if phrase %}checked{% endif %}>
          <label class="form-check-label" for="pt-br-check">{% translate "Buscar frase" %}</label>
        </div>
      </div>
      <button class="btn btn-primary ml-auto" type="submit">Pesquisar</button>
    </div>
  </div>
</form>


{% for fragment in result %}
<div class="row">
  <div class="col-md-1">
    <a href="{% url 'corpus:show' pk=fragment.work.id %}">{{ fragment.work.code }}</a>
  </div>
  <div class="col-md-5">
    <p>{% firstof fragment.headline_original|safe fragment.fragment %}</p>
  </div>
  <div class="col-md-1">
    <a href="{% url 'corpus:show' pk=fragment.work.id %}">{{ fragment.translation_code }}</a>
  </div>
  <div class="col-md-5">
    <p>{{ fragment.headline_translation|safe }}</p>
  </div>
</div>
{% empty %}
{% if q %}<p>Nothing found for {{ q }}</p>{% endif %}
{% endfor %}

{% endblock content %}
